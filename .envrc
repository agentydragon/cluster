# Use shell.nix to get latest kubeseal, tflint, popeye, and other tools
use nix

# Fix pre-commit/pip compatibility with Nix environment
export PIP_USER=false           # Override global pip user install setting
export PRE_COMMIT_USE_UV=1      # Use uv instead of pip (faster, better isolation)

# Set talos config and kubeconfig (generated by terraform)
export TALOSCONFIG="$PWD/terraform/01-infrastructure/talosconfig.yml"
export KUBECONFIG="$PWD/terraform/01-infrastructure/kubeconfig"
# kubeseal configured to use standard defaults (kube-system namespace)

cat <<'EOF'
ðŸš€ Talos Kubernetes Cluster Environment
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Authentik: https://auth.test-cluster.agentydragon.com

get-passwords  - Retrieve Authentik passwords (akadmin & agentydragon@gmail.com)
EOF

# Add scripts directory to PATH
PATH_add scripts
