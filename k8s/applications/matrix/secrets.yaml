---
# Synapse signing key using ESO password generator
apiVersion: generators.external-secrets.io/v1alpha1
kind: Password
metadata:
  name: synapse-signing-key-generator
  namespace: matrix
spec:
  length: 64
  digits: 10
  symbols: 0
  noUpper: false
  allowRepeat: true
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: synapse-signing-key
  namespace: matrix
spec:
  refreshInterval: 24h
  target:
    name: synapse-signing-key
    creationPolicy: Owner
    template:
      data:
        signing.key: "ed25519 a_{{ .password }}"
  dataFrom:
    - sourceRef:
        generatorRef:
          apiVersion: generators.external-secrets.io/v1alpha1
          kind: Password
          name: synapse-signing-key-generator
---
# Registration shared secret using ESO password generator
apiVersion: generators.external-secrets.io/v1alpha1
kind: Password
metadata:
  name: synapse-registration-secret-generator
  namespace: matrix
spec:
  length: 32
  digits: 10
  symbols: 0
  noUpper: false
  allowRepeat: true
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: synapse-registration-secret
  namespace: matrix
spec:
  refreshInterval: 24h
  target:
    name: synapse-registration-secret
    creationPolicy: Owner
    template:
      data:
        secret: "{{ .password }}"
  dataFrom:
    - sourceRef:
        generatorRef:
          apiVersion: generators.external-secrets.io/v1alpha1
          kind: Password
          name: synapse-registration-secret-generator
---
# Macaroon secret key using ESO password generator
apiVersion: generators.external-secrets.io/v1alpha1
kind: Password
metadata:
  name: synapse-macaroon-secret-generator
  namespace: matrix
spec:
  length: 32
  digits: 10
  symbols: 0
  noUpper: false
  allowRepeat: true
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: synapse-macaroon-secret
  namespace: matrix
spec:
  refreshInterval: 24h
  target:
    name: synapse-macaroon-secret
    creationPolicy: Owner
    template:
      data:
        secret: "{{ .password }}"
  dataFrom:
    - sourceRef:
        generatorRef:
          apiVersion: generators.external-secrets.io/v1alpha1
          kind: Password
          name: synapse-macaroon-secret-generator
---
# PostgreSQL password auto-generated by PostgreSQL chart
